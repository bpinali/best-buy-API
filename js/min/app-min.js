function getUserQuery(){$(".loader").fadeIn("slow"),getResults($("#search-box").val()),$("#search-box").val("")}function getResults(e){var t="https://crossorigin.me/https://api.bestbuy.com/v1/products((name="+e+"*)&type!=BlackTie&customerTopRated=true)?sort=salesRankShortTerm.asc";$.ajax({method:"GET",url:t,data:{format:"json",apiKey:"t5reggzup769kevta2bdabkx",page:1,pageSize:36},cache:!0,preowned:!1,active:!0,dataType:"jsonp"}).done(ajaxDone).fail(ifResultsFail)}function resultsIntoListItem(e,t){var o=$("#product-list-item").html(),s=Handlebars.compile(o);return t.isSale=t.salePrice<t.regularPrice&&t.salePrice,e+=s(t)}function clampItemTitle(e,t){$clamp(t,{clamp:3})}function ifResultsFail(e,t,o){console.log(e),console.log(t),console.log(o)}function ajaxDone(e){var t="";0==e.products.length?alert("No Results Found!"):(t=!e.error&&e.products?e.products.reduce(resultsIntoListItem,""):"Unable to access products (see browser console for more information)",$(".results ul").html(t),$(".clamp-this").each(clampItemTitle)),$(".loader").fadeOut("slow")}$("#search-button").on("click",getUserQuery),$(document).on("keypress",function(e){13==e.keyCode&&getUserQuery()});